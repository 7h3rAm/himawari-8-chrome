!function(){"use strict";var t=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},e=[].slice,n={};function r(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function o(t){if(!t._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,r=t._tasks[e],o=r.length-1,u=r[o];r[o]=i(t,e),--t._waiting,++t._active,r=u.apply(null,r),t._tasks[e]&&(t._tasks[e]=r||n)}}(t)}catch(e){if(t._tasks[t._ended+t._active-1])u(t,e);else if(!t._data)throw e}}function i(t,e){return function(n,r){t._tasks[e]&&(--t._active,++t._ended,t._tasks[e]=null,null==t._error&&(null!=n?u(t,n):(t._data[e]=r,t._waiting?o(t):a(t))))}}function u(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;--r>=0;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,a(t)}function a(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function c(t){if(null==t)t=1/0;else if(!((t=+t)>=1))throw new Error("invalid concurrency");return new r(t)}r.prototype=c.prototype={constructor:r,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var n=e.call(arguments,1);return n.push(t),++this._waiting,this._tasks.push(n),o(this),this},abort:function(){return null==this._error&&u(this,new Error("abort")),this},await:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(e,n){t.apply(null,[e].concat(n))},a(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,a(this),this}};function l(){}function s(t,e){var n=new l;if(t instanceof l)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==e)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e(r=t[o],o,t),r)}else if(t)for(var u in t)n.set(u,t[u]);return n}function f(){}l.prototype=s.prototype={constructor:l,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var g=s.prototype;f.prototype=function(t,e){var n=new f;if(t instanceof f)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}.prototype={constructor:f,has:g.has,add:function(t){return this["$"+(t+="")]=t,this},remove:g.remove,clear:g.clear,values:g.keys,size:g.size,empty:g.empty,each:g.each};var h={value:function(){}};function d(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new m(r)}function m(t){this._=t}function v(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function p(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=h,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}m.prototype=d.prototype={constructor:m,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),u=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<a;)if(n=(t=i[u]).type)o[n]=p(o[n],t.name,e);else if(null==e)for(n in o)o[n]=p(o[n],t.name,null);return this}for(;++u<a;)if((n=(t=i[u]).type)&&(n=v(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new m(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var w,y,T=(w="application/json",y=function(t){return JSON.parse(t.responseText)},function(t,e){var n=function(t,e){var n,r,o,i,u=d("beforesend","progress","load","error"),a=s(),c=new XMLHttpRequest,l=null,f=null,g=0;function h(t){var e,r=c.status;if(!r&&function(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}(c)||r>=200&&r<300||304===r){if(o)try{e=o.call(n,c)}catch(t){return void u.call("error",n,t)}else e=c;u.call("load",n,e)}else u.call("error",n,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in c||!/^(http(s)?:)?\/\//.test(t)||(c=new XDomainRequest),"onload"in c?c.onload=c.onerror=c.ontimeout=h:c.onreadystatechange=function(t){c.readyState>3&&h(t)},c.onprogress=function(t){u.call("progress",n,t)},n={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?a.get(t):(null==e?a.remove(t):a.set(t,e+""),n)},mimeType:function(t){return arguments.length?(r=null==t?null:t+"",n):r},responseType:function(t){return arguments.length?(i=t,n):i},timeout:function(t){return arguments.length?(g=+t,n):g},user:function(t){return arguments.length<1?l:(l=null==t?null:t+"",n)},password:function(t){return arguments.length<1?f:(f=null==t?null:t+"",n)},response:function(t){return o=t,n},get:function(t,e){return n.send("GET",t,e)},post:function(t,e){return n.send("POST",t,e)},send:function(e,o,s){return c.open(e,t,!0,l,f),null==r||a.has("accept")||a.set("accept",r+",*/*"),c.setRequestHeader&&a.each(function(t,e){c.setRequestHeader(e,t)}),null!=r&&c.overrideMimeType&&c.overrideMimeType(r),null!=i&&(c.responseType=i),g>0&&(c.timeout=g),null==s&&"function"==typeof o&&(s=o,o=null),null!=s&&1===s.length&&(s=function(t){return function(e,n){t(null==e?n:null)}}(s)),null!=s&&n.on("error",s).on("load",function(t){s(null,t)}),u.call("beforesend",n,c),c.send(null==o?null:o),n},abort:function(){return c.abort(),n},on:function(){var t=u.on.apply(u,arguments);return t===u?n:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}(t).mimeType(w).response(y);if(null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}),C={},M={},_=34,U=10,D=13;function b(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function S(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,o=[],i=t.length,u=0,a=0,c=i<=0,l=!1;function s(){if(c)return M;if(l)return l=!1,C;var e,r,o=u;if(t.charCodeAt(o)===_){for(;u++<i&&t.charCodeAt(u)!==_||t.charCodeAt(++u)===_;);return(e=u)>=i?c=!0:(r=t.charCodeAt(u++))===U?l=!0:r===D&&(l=!0,t.charCodeAt(u)===U&&++u),t.slice(o+1,e-1).replace(/""/g,'"')}for(;u<i;){if((r=t.charCodeAt(e=u++))===U)l=!0;else if(r===D)l=!0,t.charCodeAt(u)===U&&++u;else if(r!==n)continue;return t.slice(o,e)}return c=!0,t.slice(o,i)}for(t.charCodeAt(i-1)===U&&--i,t.charCodeAt(i-1)===D&&--i;(r=s())!==M;){for(var f=[];r!==C&&r!==M;)f.push(r),r=s();e&&null==(f=e(f,a++))||o.push(f)}return o}function o(e){return e.map(i).join(t)}function i(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,o,i=r(t,function(t,r){if(n)return n(t,r-1);o=t,n=e?function(t,e){var n=b(t);return function(r,o){return e(n(r),o,t)}}(t,e):b(t)});return i.columns=o||[],i},parseRows:r,format:function(e,n){return null==n&&(n=function(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}(e)),[n.map(i).join(t)].concat(e.map(function(e){return n.map(function(t){return i(e[t])}).join(t)})).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}S(","),S("\t");var x=new Date,I=new Date;function k(t,e,n,r){function o(e){return t(e=new Date(+e)),e}return o.floor=o,o.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},o.round=function(t){var e=o(t),n=o.ceil(t);return t-e<n-t?e:n},o.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},o.range=function(n,r,i){var u,a=[];if(n=o.ceil(n),i=null==i?1:Math.floor(i),!(n<r&&i>0))return a;do{a.push(u=new Date(+n)),e(n,i),t(n)}while(u<n&&n<r);return a},o.filter=function(n){return k(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(o.count=function(e,r){return x.setTime(+e),I.setTime(+r),t(x),t(I),Math.floor(n(x,I))},o.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?o.filter(r?function(e){return r(e)%t==0}:function(e){return o.count(0,e)%t==0}):o:null}),o}var E=k(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});E.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?k(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):E:null};var F=6e4,H=6048e5,Y=(k(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),k(function(t){t.setTime(Math.floor(t/F)*F)},function(t,e){t.setTime(+t+e*F)},function(t,e){return(e-t)/F},function(t){return t.getMinutes()}),k(function(t){var e=t.getTimezoneOffset()*F%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),k(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*F)/864e5},function(t){return t.getDate()-1}));function L(t){return k(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*F)/H})}var A=L(0),O=L(1),j=(L(2),L(3),L(4)),R=(L(5),L(6),k(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),k(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));R.every=function(t){return isFinite(t=Math.floor(t))&&t>0?k(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};k(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*F)},function(t,e){return(e-t)/F},function(t){return t.getUTCMinutes()}),k(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()});var B=k(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function $(t){return k(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/H})}var Z=$(0),N=$(1),P=($(2),$(3),$(4)),z=($(5),$(6),k(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),k(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function W(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function V(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function X(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}z.every=function(t){return isFinite(t=Math.floor(t))&&t>0?k(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var J,Q,q,G={"-":"",_:" ",0:"0"},K=/^\s*\d+/,tt=/^%/,et=/[\\^$*+?|[\]().{}]/g;function nt(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function rt(t){return t.replace(et,"\\$&")}function ot(t){return new RegExp("^(?:"+t.map(rt).join("|")+")","i")}function it(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ut(t,e,n){var r=K.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function at(t,e,n){var r=K.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function ct(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function st(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function ft(t,e,n){var r=K.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function gt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function ht(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function dt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function mt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function vt(t,e,n){var r=K.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function pt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function wt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function yt(t,e,n){var r=K.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Tt(t,e,n){var r=K.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=K.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Mt(t,e,n){var r=tt.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function _t(t,e,n){var r=K.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ut(t,e,n){var r=K.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Dt(t,e){return nt(t.getDate(),e,2)}function bt(t,e){return nt(t.getHours(),e,2)}function St(t,e){return nt(t.getHours()%12||12,e,2)}function xt(t,e){return nt(1+Y.count(R(t),t),e,3)}function It(t,e){return nt(t.getMilliseconds(),e,3)}function kt(t,e){return It(t,e)+"000"}function Et(t,e){return nt(t.getMonth()+1,e,2)}function Ft(t,e){return nt(t.getMinutes(),e,2)}function Ht(t,e){return nt(t.getSeconds(),e,2)}function Yt(t){var e=t.getDay();return 0===e?7:e}function Lt(t,e){return nt(A.count(R(t),t),e,2)}function At(t,e){var n=t.getDay();return t=n>=4||0===n?j(t):j.ceil(t),nt(j.count(R(t),t)+(4===R(t).getDay()),e,2)}function Ot(t){return t.getDay()}function jt(t,e){return nt(O.count(R(t),t),e,2)}function Rt(t,e){return nt(t.getFullYear()%100,e,2)}function Bt(t,e){return nt(t.getFullYear()%1e4,e,4)}function $t(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+nt(e/60|0,"0",2)+nt(e%60,"0",2)}function Zt(t,e){return nt(t.getUTCDate(),e,2)}function Nt(t,e){return nt(t.getUTCHours(),e,2)}function Pt(t,e){return nt(t.getUTCHours()%12||12,e,2)}function zt(t,e){return nt(1+B.count(z(t),t),e,3)}function Wt(t,e){return nt(t.getUTCMilliseconds(),e,3)}function Vt(t,e){return Wt(t,e)+"000"}function Xt(t,e){return nt(t.getUTCMonth()+1,e,2)}function Jt(t,e){return nt(t.getUTCMinutes(),e,2)}function Qt(t,e){return nt(t.getUTCSeconds(),e,2)}function qt(t){var e=t.getUTCDay();return 0===e?7:e}function Gt(t,e){return nt(Z.count(z(t),t),e,2)}function Kt(t,e){var n=t.getUTCDay();return t=n>=4||0===n?P(t):P.ceil(t),nt(P.count(z(t),t)+(4===z(t).getUTCDay()),e,2)}function te(t){return t.getUTCDay()}function ee(t,e){return nt(N.count(z(t),t),e,2)}function ne(t,e){return nt(t.getUTCFullYear()%100,e,2)}function re(t,e){return nt(t.getUTCFullYear()%1e4,e,4)}function oe(){return"+0000"}function ie(){return"%"}function ue(t){return+t}function ae(t){return Math.floor(+t/1e3)}J=function(t){var e=t.dateTime,n=t.date,r=t.time,o=t.periods,i=t.days,u=t.shortDays,a=t.months,c=t.shortMonths,l=ot(o),s=it(o),f=ot(i),g=it(i),h=ot(u),d=it(u),m=ot(a),v=it(a),p=ot(c),w=it(c),y={a:function(t){return u[t.getDay()]},A:function(t){return i[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Dt,e:Dt,f:kt,H:bt,I:St,j:xt,L:It,m:Et,M:Ft,p:function(t){return o[+(t.getHours()>=12)]},Q:ue,s:ae,S:Ht,u:Yt,U:Lt,V:At,w:Ot,W:jt,x:null,X:null,y:Rt,Y:Bt,Z:$t,"%":ie},T={a:function(t){return u[t.getUTCDay()]},A:function(t){return i[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Zt,e:Zt,f:Vt,H:Nt,I:Pt,j:zt,L:Wt,m:Xt,M:Jt,p:function(t){return o[+(t.getUTCHours()>=12)]},Q:ue,s:ae,S:Qt,u:qt,U:Gt,V:Kt,w:te,W:ee,x:null,X:null,y:ne,Y:re,Z:oe,"%":ie},C={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=w[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,n,r){return U(t,e,n,r)},d:mt,e:mt,f:Ct,H:pt,I:pt,j:vt,L:Tt,m:dt,M:wt,p:function(t,e,n){var r=l.exec(e.slice(n));return r?(t.p=s[r[0].toLowerCase()],n+r[0].length):-1},Q:_t,s:Ut,S:yt,u:at,U:ct,V:lt,w:ut,W:st,x:function(t,e,r){return U(t,n,e,r)},X:function(t,e,n){return U(t,r,e,n)},y:gt,Y:ft,Z:ht,"%":Mt};function M(t,e){return function(n){var r,o,i,u=[],a=-1,c=0,l=t.length;for(n instanceof Date||(n=new Date(+n));++a<l;)37===t.charCodeAt(a)&&(u.push(t.slice(c,a)),null!=(o=G[r=t.charAt(++a)])?r=t.charAt(++a):o="e"===r?" ":"0",(i=e[r])&&(r=i(n,o)),u.push(r),c=a+1);return u.push(t.slice(c,a)),u.join("")}}function _(t,e){return function(n){var r,o,i=X(1900);if(U(i,t,n+="",0)!=n.length)return null;if("Q"in i)return new Date(i.Q);if("p"in i&&(i.H=i.H%12+12*i.p),"V"in i){if(i.V<1||i.V>53)return null;"w"in i||(i.w=1),"Z"in i?(r=(o=(r=V(X(i.y))).getUTCDay())>4||0===o?N.ceil(r):N(r),r=B.offset(r,7*(i.V-1)),i.y=r.getUTCFullYear(),i.m=r.getUTCMonth(),i.d=r.getUTCDate()+(i.w+6)%7):(r=(o=(r=e(X(i.y))).getDay())>4||0===o?O.ceil(r):O(r),r=Y.offset(r,7*(i.V-1)),i.y=r.getFullYear(),i.m=r.getMonth(),i.d=r.getDate()+(i.w+6)%7)}else("W"in i||"U"in i)&&("w"in i||(i.w="u"in i?i.u%7:"W"in i?1:0),o="Z"in i?V(X(i.y)).getUTCDay():e(X(i.y)).getDay(),i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(o+5)%7:i.w+7*i.U-(o+6)%7);return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,V(i)):e(i)}}function U(t,e,n,r){for(var o,i,u=0,a=e.length,c=n.length;u<a;){if(r>=c)return-1;if(37===(o=e.charCodeAt(u++))){if(o=e.charAt(u++),!(i=C[o in G?e.charAt(u++):o])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return y.x=M(n,y),y.X=M(r,y),y.c=M(e,y),T.x=M(n,T),T.X=M(r,T),T.c=M(e,T),{format:function(t){var e=M(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",W);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",T);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t,V);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),J.format,J.parse,Q=J.utcFormat,q=J.utcParse;Date.prototype.toISOString||Q("%Y-%m-%dT%H:%M:%S.%LZ");+new Date("2000-01-01T00:00:00.000Z")||q("%Y-%m-%dT%H:%M:%S.%LZ");var ce="https://himawari8-dl.nict.go.jp/himawari8/img/",le="https://epic.gsfc.nasa.gov/",se="http://rammb-slider.cira.colostate.edu/data/",fe="INFRARED_FULL",ge="D531106",he="EPIC",de="EPIC_ENHANCED",me="GOES_16",ve=550,pe=[1,4,8,16,20],we=678,ye=[1,2,4,8,16],Te=2048,Ce=.9,Me="imageData",_e="cachedDate",Ue="cachedImageType",De=null,be=browser&&!!browser.storage,Se={animated:!1,imageType:ge};function xe(t,e){return void 0===e&&(e=432e3),"https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url="+t+"&container=focus&refresh="+e}function Ie(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function ke(t,e){for(var n=document.getElementById("output").clientHeight*window.devicePixelRatio/t,r=0;r<e.length;r++){var o=e[r];if(o>n)return{blocks:o,level:r}}var i=e.length-1;return{blocks:e[i],level:i}}var Ee=null,Fe=null;function He(t){document.getElementById("time").innerHTML=t===De?"":'<abbr title="'+t+'">'+function(t){var e=Math.floor(((new Date).getTime()-t.getTime())/1e3),n=Math.floor(e/31536e3);return n>1?n+" years":(n=Math.floor(e/2592e3))>1?n+" months":(n=Math.floor(e/86400))>1?n+" days":(n=Math.floor(e/3600))>1?n+" hours":(n=Math.floor(e/60))>1?n+" minutes":Math.floor(e)+" seconds"}(t)+"</abbr> ago"}function Ye(t,e){He(t),Ee=t,function(t){switch(document.body.classList.remove("himawari"),document.body.classList.remove("dscovr"),document.body.classList.remove("goes"),document.body.classList.remove("goes16"),t){case fe:case ge:document.body.classList.add("himawari");break;case he:case de:document.body.classList.add("dscovr");break;case me:document.body.classList.add("goes16");break;default:console.warn("Unknown image type",t)}}(e),Fe=e}function Le(t,e){if(!Ee||t.getTime()!==Ee.getTime()||Fe!==e){var n=!localStorage.getItem(_e);n&&Ye(t,e);var r=function(t){for(var e=ce+(t.type||ge),n=t.date,r=t.blocks,o=e+"/"+r+"d/"+ve+"/"+Q("%Y/%m/%d/%H%M%S")(n),i=[],u=0;u<r;u++)for(var a=0;a<r;a++){var c=o+"_"+a+"_"+u+".png";i.push({url:xe(c),x:a,y:u})}return{blocks:r,date:n,tiles:i}}({blocks:ke(ve,pe).blocks,date:t,type:e}),o=r.blocks*ve,i=n?document.getElementById("output"):document.createElement("canvas"),u=i.getContext("2d");u.canvas.width=o,u.canvas.height=o;var a=c();r.tiles.forEach(function(t){a.defer(l,t)}),a.awaitAll(function(r){if(r)throw r;if(!n){var u=document.getElementById("output").getContext("2d");u.canvas.width=o,u.canvas.height=o,u.drawImage(i,0,0)}Ye(t,e);var a=i.toDataURL("image/jpeg",Ce);localStorage.setItem(Me,a),localStorage.setItem(_e,t.toString()),localStorage.setItem(Ue,e)})}function l(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){u.drawImage(n,t.x*ve,t.y*ve,ve,ve),e()},n.src=t.url}}function Ae(e,n){if(!Ee||e.getTime()!==Ee.getTime()||Fe!==n){var r=!localStorage.getItem(_e);r&&Ye(e,n);var o=function(t){for(var e=t.date,n=t.blocks,r=t.level,o=Q("%Y%m%d")(t.date),i=Q("%Y%m%d%H%M%S")(t.date),u=se+"/imagery/"+o+"/goes-16---full_disk/geocolor/"+i+"/",a=[],c=0;c<n;c++)for(var l=0;l<n;l++){var s=""+u+Ie(r,2)+"/"+Ie(c,3)+"_"+Ie(l,3)+".png";a.push({url:xe(s),x:l,y:c})}return{blocks:n,date:e,tiles:a}}(t({date:e},ke(we,ye))),i=o.blocks*ve,u=r?document.getElementById("output"):document.createElement("canvas"),a=u.getContext("2d");a.canvas.width=i,a.canvas.height=i;var l=c();o.tiles.forEach(function(t){l.defer(s,t)}),l.awaitAll(function(t){if(t)throw t;if(!r){var o=document.getElementById("output").getContext("2d");o.canvas.width=i,o.canvas.height=i,o.drawImage(u,0,0)}Ye(e,n);var a=u.toDataURL("image/jpeg",Ce);localStorage.setItem(Me,a),localStorage.setItem(_e,e.toString()),localStorage.setItem(Ue,n)})}function s(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){a.drawImage(n,t.x*ve,t.y*ve,ve,ve),e()},n.src=t.url}}function Oe(){function t(t){!function(t,e){T("https://himawari-8.appspot.com/latest"+(t===fe?"?infrared=true":""),function(t,n){if(t)throw t;var r=n.date;e(q("%Y-%m-%d %H:%M:%S")(r))})}(t,function(e){Le(e,t)})}function e(t){!function(t,e){T(le+"api/"+(t===de?"enhanced":"natural"),function(t,n){if(t)throw t;if(0!==n.length){var r=n[n.length-1];e({date:q("%Y-%m-%d %H:%M:%S")(r.date),image:r.image})}})}(t,function(e){!function(t,e){if(!Ee||t.date.getTime()!==Ee.getTime()||Fe!==e){var n=!localStorage.getItem(_e);n&&Ye(t.date,e);var r=n?document.getElementById("output"):document.createElement("canvas"),o=r.getContext("2d");o.canvas.width=Te,o.canvas.height=Te;var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){if(o.drawImage(i,0,0),!n){var u=document.getElementById("output").getContext("2d");u.canvas.width=Te,u.canvas.height=Te,u.drawImage(r,0,0)}Ye(t.date,e);var a=r.toDataURL("image/jpeg",Ce);localStorage.setItem(Me,a),localStorage.setItem(_e,t.date.toString()),localStorage.setItem(Ue,e)};var u=e===de?"enhanced":"natural",a=Ie(t.date.getMonth()+1,2),c=Ie(t.date.getDate(),2);i.src=xe(le+"archive/"+u+"/"+t.date.getFullYear()+"/"+a+"/"+c+"/png/"+t.image+".png")}}(e,t)})}function n(t){var e;e=function(e){Ae(e,t)},T(se+"json/goes-16/full_disk/geocolor/latest_times.json",function(t,n){if(t)throw t;e(q("%Y%m%d%H%M%S")(n.timestamps_int[0]))})}navigator.onLine&&(be?browser.storage.sync.get(Se).then(function(r){switch(r.imageType){case he:case de:e(r.imageType);break;case me:n(r.imageType);break;case fe:case ge:default:t(r.imageType)}}):t(ge))}function je(){var t,e,n;localStorage.getItem(_e)&&(t=document.getElementById("output").getContext("2d"),e=new Date(localStorage.getItem(_e)),(n=new Image).onload=function(){t.canvas.width=n.width,t.canvas.height=n.height,t.drawImage(n,0,0),Ye(e,localStorage.getItem(Ue))},n.src=localStorage.getItem(Me)),Oe()}window.setInterval(Oe,6e4),window.addEventListener("online",Oe),be?browser.storage.sync.get(Se).then(function(t){t.animated?document.body.classList.add("animated"):document.body.classList.remove("animated"),je()}):je(),window.setInterval(function(){Ee&&He(Ee)},1e4),be&&(browser.storage.onChanged.addListener(Oe),document.body.classList.add("extension"),document.getElementById("go-to-options").addEventListener("click",function(){browser.runtime.openOptionsPage()})),document.getElementById("explore").addEventListener("click",function(){switch(Fe){case he:window.open("https://epic.gsfc.nasa.gov","_self");case de:window.open("https://epic.gsfc.nasa.gov/enhanced","_self");break;case me:window.open("http://rammb-slider.cira.colostate.edu/","_self");break;case fe:case ge:window.open("http://himawari8.nict.go.jp/himawari8-image.htm?sI=D531106","_self");break;default:window.alert("No explorer found.")}})}();
//# sourceMappingURL=bundle.js.map
