!function(){"use strict";var s=function(){return(s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},n=[].slice,a={};function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function o(e){if(!e._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,o=n[r];n[r]=i(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||a)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])u(e,t);else if(!e._data)throw t}}function i(n,r){return function(t,e){n._tasks[r]&&(--n._active,++n._ended,(n._tasks[r]=null)==n._error&&(null!=t?u(n,t):(n._data[r]=e,n._waiting?o(n):c(n))))}}function u(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;0<=--r;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,c(t)}function c(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function l(t){if(null==t)t=1/0;else if(!(1<=(t=+t)))throw new Error("invalid concurrency");return new e(t)}e.prototype=l.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=n.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),o(this),this},abort:function(){return null==this._error&&u(this,new Error("abort")),this},await:function(n){if("function"!=typeof n)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,e){n.apply(null,[t].concat(e))},c(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,c(this),this}};var r="$";function f(){}function m(t,e){var n=new f;if(t instanceof f)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,a=t.length;if(null==e)for(;++o<a;)n.set(o,t[o]);else for(;++o<a;)n.set(e(r=t[o],o,t),r)}else if(t)for(var i in t)n.set(i,t[i]);return n}function g(){}f.prototype=m.prototype={constructor:f,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};var t=m.prototype;g.prototype=function(t,e){var n=new g;if(t instanceof g)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}.prototype={constructor:g,has:t.has,add:function(t){return this[r+(t+="")]=t,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each};var h={value:function(){}};function v(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new d(r)}function d(t){this._=t}function p(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function w(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=h,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}d.prototype=v.prototype={constructor:d,on:function(t,e){var n,r,o=this._,a=(r=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),i=-1,u=a.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<u;)if(n=(t=a[i]).type)o[n]=w(o[n],t.name,e);else if(null==e)for(n in o)o[n]=w(o[n],t.name,null);return this}for(;++i<u;)if((n=(t=a[i]).type)&&(n=p(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new d(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),a=0;a<n;++a)o[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=0,n=(r=this._[t]).length;a<n;++a)r[a].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,a=r.length;o<a;++o)r[o].value.apply(e,n)}};var y,T,C=(y="application/json",T=function(t){return JSON.parse(t.responseText)},function(t,e){var n=function(o,t){var a,i,u,c,s=v("beforesend","progress","load","error"),l=m(),f=new XMLHttpRequest,g=null,h=null,d=0;function e(t){var e,n,r,o=f.status;if(!o&&((r=(n=f).responseType)&&"text"!==r?n.response:n.responseText)||200<=o&&o<300||304===o){if(u)try{e=u.call(a,f)}catch(t){return void s.call("error",a,t)}else e=f;s.call("load",a,e)}else s.call("error",a,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(o)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=f.ontimeout=e:f.onreadystatechange=function(t){3<f.readyState&&e(t)},f.onprogress=function(t){s.call("progress",a,t)},a={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),a)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",a):i},responseType:function(t){return arguments.length?(c=t,a):c},timeout:function(t){return arguments.length?(d=+t,a):d},user:function(t){return arguments.length<1?g:(g=null==t?null:t+"",a)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",a)},response:function(t){return u=t,a},get:function(t,e){return a.send("GET",t,e)},post:function(t,e){return a.send("POST",t,e)},send:function(t,e,n){var r;return f.open(t,o,!0,g,h),null==i||l.has("accept")||l.set("accept",i+",*/*"),f.setRequestHeader&&l.each(function(t,e){f.setRequestHeader(e,t)}),null!=i&&f.overrideMimeType&&f.overrideMimeType(i),null!=c&&(f.responseType=c),0<d&&(f.timeout=d),null==n&&"function"==typeof e&&(n=e,e=null),null!=n&&1===n.length&&(r=n,n=function(t,e){r(null==t?e:null)}),null!=n&&a.on("error",n).on("load",function(t){n(null,t)}),s.call("beforesend",a,f),f.send(null==e?null:e),a},abort:function(){return f.abort(),a},on:function(){var t=s.on.apply(s,arguments);return t===s?a:t}},null==t)return a;if("function"!=typeof t)throw new Error("invalid callback: "+t);return a.get(t)}(t).mimeType(y).response(T);if(null==e)return n;if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}),M={},_={};function b(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function U(a){var e=new RegExp('["'+a+"\n\r]"),f=a.charCodeAt(0);function n(r,t){var e,n=[],o=r.length,a=0,i=0,u=o<=0,c=!1;function s(){if(u)return _;if(c)return c=!1,M;var t,e,n=a;if(34===r.charCodeAt(n)){for(;a++<o&&34!==r.charCodeAt(a)||34===r.charCodeAt(++a););return(t=a)>=o?u=!0:10===(e=r.charCodeAt(a++))?c=!0:13===e&&(c=!0,10===r.charCodeAt(a)&&++a),r.slice(n+1,t-1).replace(/""/g,'"')}for(;a<o;){if(10===(e=r.charCodeAt(t=a++)))c=!0;else if(13===e)c=!0,10===r.charCodeAt(a)&&++a;else if(e!==f)continue;return r.slice(n,t)}return u=!0,r.slice(n,o)}for(10===r.charCodeAt(o-1)&&--o,13===r.charCodeAt(o-1)&&--o;(e=s())!==_;){for(var l=[];e!==M&&e!==_;)l.push(e),e=s();t&&null==(l=t(l,i++))||n.push(l)}return n}function r(t){return t.map(i).join(a)}function i(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,a){var i,u,e=n(t,function(t,e){if(i)return i(t,e-1);var n,r,o;u=t,i=a?(r=a,o=b(n=t),function(t,e){return r(o(t),e,n)}):b(t)});return e.columns=u||[],e},parseRows:n,format:function(t,n){var e,r,o;return null==n&&(e=t,r=Object.create(null),o=[],e.forEach(function(t){for(var e in t)e in r||o.push(r[e]=e)}),n=o),[n.map(i).join(a)].concat(t.map(function(e){return n.map(function(t){return i(e[t])}).join(a)})).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}}var D=U(","),S=(D.parse,D.parseRows,D.format,D.formatRows,U("\t")),x=(S.parse,S.parseRows,S.format,S.formatRows,new Date),E=new Date;function I(a,i,n,r){function u(t){return a(t=new Date(+t)),t}return(u.floor=u).ceil=function(t){return a(t=new Date(t-1)),i(t,1),a(t),t},u.round=function(t){var e=u(t),n=u.ceil(t);return t-e<n-t?e:n},u.offset=function(t,e){return i(t=new Date(+t),null==e?1:Math.floor(e)),t},u.range=function(t,e,n){var r,o=[];if(t=u.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return o;for(;o.push(r=new Date(+t)),i(t,n),a(t),r<t&&t<e;);return o},u.filter=function(n){return I(function(t){if(t<=t)for(;a(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;i(t,-1),!n(t););else for(;0<=--e;)for(;i(t,1),!n(t););})},n&&(u.count=function(t,e){return x.setTime(+t),E.setTime(+e),a(x),a(E),Math.floor(n(x,E))},u.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?u.filter(r?function(t){return r(t)%e==0}:function(t){return u.count(0,t)%e==0}):u:null}),u}var k=I(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});k.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?I(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):k:null};var F=1e3,Y=6e4,A=36e5,H=(I(function(t){t.setTime(Math.floor(t/F)*F)},function(t,e){t.setTime(+t+e*F)},function(t,e){return(e-t)/F},function(t){return t.getUTCSeconds()}),I(function(t){t.setTime(Math.floor(t/Y)*Y)},function(t,e){t.setTime(+t+e*Y)},function(t,e){return(e-t)/Y},function(t){return t.getMinutes()}),I(function(t){var e=t.getTimezoneOffset()*Y%A;e<0&&(e+=A),t.setTime(Math.floor((+t-e)/A)*A+e)},function(t,e){t.setTime(+t+e*A)},function(t,e){return(e-t)/A},function(t){return t.getHours()}),I(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Y)/864e5},function(t){return t.getDate()-1}));function L(e){return I(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Y)/6048e5})}var O=L(0),j=L(1),R=(L(2),L(3),L(4)),B=(L(5),L(6),O.range,j.range,R.range,I(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),I(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));B.every=function(n){return isFinite(n=Math.floor(n))&&0<n?I(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};I(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*Y)},function(t,e){return(e-t)/Y},function(t){return t.getUTCMinutes()}),I(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*A)},function(t,e){return(e-t)/A},function(t){return t.getUTCHours()});var P=I(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function N(e){return I(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Z=N(0),z=N(1),W=(N(2),N(3),N(4)),V=(N(5),N(6),Z.range,z.range,W.range,I(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),I(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function X(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function J(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Q(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}V.every=function(n){return isFinite(n=Math.floor(n))&&0<n?I(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var q,G,$,K={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,et=/^%/,nt=/[\\^$*+?|[\]().{}]/g;function rt(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",a=o.length;return r+(a<n?new Array(n-a+1).join(e)+o:o)}function ot(t){return t.replace(nt,"\\$&")}function at(t){return new RegExp("^(?:"+t.map(ot).join("|")+")","i")}function it(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function ut(t,e,n){var r=tt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ct(t,e,n){var r=tt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function st(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ft(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gt(t,e,n){var r=tt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ht(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function dt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function pt(t,e,n){var r=tt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function yt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=tt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mt(t,e,n){var r=tt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _t(t,e,n){var r=et.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function bt(t,e,n){var r=tt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Ut(t,e,n){var r=tt.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function Dt(t,e){return rt(t.getDate(),e,2)}function St(t,e){return rt(t.getHours(),e,2)}function xt(t,e){return rt(t.getHours()%12||12,e,2)}function Et(t,e){return rt(1+H.count(B(t),t),e,3)}function It(t,e){return rt(t.getMilliseconds(),e,3)}function kt(t,e){return It(t,e)+"000"}function Ft(t,e){return rt(t.getMonth()+1,e,2)}function Yt(t,e){return rt(t.getMinutes(),e,2)}function At(t,e){return rt(t.getSeconds(),e,2)}function Ht(t){var e=t.getDay();return 0===e?7:e}function Lt(t,e){return rt(O.count(B(t),t),e,2)}function Ot(t,e){var n=t.getDay();return t=4<=n||0===n?R(t):R.ceil(t),rt(R.count(B(t),t)+(4===B(t).getDay()),e,2)}function jt(t){return t.getDay()}function Rt(t,e){return rt(j.count(B(t),t),e,2)}function Bt(t,e){return rt(t.getFullYear()%100,e,2)}function Pt(t,e){return rt(t.getFullYear()%1e4,e,4)}function Nt(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+rt(e/60|0,"0",2)+rt(e%60,"0",2)}function Zt(t,e){return rt(t.getUTCDate(),e,2)}function zt(t,e){return rt(t.getUTCHours(),e,2)}function Wt(t,e){return rt(t.getUTCHours()%12||12,e,2)}function Vt(t,e){return rt(1+P.count(V(t),t),e,3)}function Xt(t,e){return rt(t.getUTCMilliseconds(),e,3)}function Jt(t,e){return Xt(t,e)+"000"}function Qt(t,e){return rt(t.getUTCMonth()+1,e,2)}function qt(t,e){return rt(t.getUTCMinutes(),e,2)}function Gt(t,e){return rt(t.getUTCSeconds(),e,2)}function $t(t){var e=t.getUTCDay();return 0===e?7:e}function Kt(t,e){return rt(Z.count(V(t),t),e,2)}function te(t,e){var n=t.getUTCDay();return t=4<=n||0===n?W(t):W.ceil(t),rt(W.count(V(t),t)+(4===V(t).getUTCDay()),e,2)}function ee(t){return t.getUTCDay()}function ne(t,e){return rt(z.count(V(t),t),e,2)}function re(t,e){return rt(t.getUTCFullYear()%100,e,2)}function oe(t,e){return rt(t.getUTCFullYear()%1e4,e,4)}function ae(){return"+0000"}function ie(){return"%"}function ue(t){return+t}function ce(t){return Math.floor(+t/1e3)}q=function(t){var r=t.dateTime,o=t.date,a=t.time,e=t.periods,n=t.days,i=t.shortDays,u=t.months,c=t.shortMonths,s=at(e),l=it(e),f=at(n),g=it(n),h=at(i),d=it(i),m=at(u),v=it(u),p=at(c),w=it(c),y={a:function(t){return i[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:Dt,e:Dt,f:kt,H:St,I:xt,j:Et,L:It,m:Ft,M:Yt,p:function(t){return e[+(12<=t.getHours())]},Q:ue,s:ce,S:At,u:Ht,U:Lt,V:Ot,w:jt,W:Rt,x:null,X:null,y:Bt,Y:Pt,Z:Nt,"%":ie},T={a:function(t){return i[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Zt,e:Zt,f:Jt,H:zt,I:Wt,j:Vt,L:Xt,m:Qt,M:qt,p:function(t){return e[+(12<=t.getUTCHours())]},Q:ue,s:ce,S:Gt,u:$t,U:Kt,V:te,w:ee,W:ne,x:null,X:null,y:re,Y:oe,Z:ae,"%":ie},C={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=w[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return b(t,r,e,n)},d:vt,e:vt,f:Mt,H:wt,I:wt,j:pt,L:Ct,m:mt,M:yt,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:bt,s:Ut,S:Tt,u:ct,U:st,V:lt,w:ut,W:ft,x:function(t,e,n){return b(t,o,e,n)},X:function(t,e,n){return b(t,a,e,n)},y:ht,Y:gt,Z:dt,"%":_t};function M(c,s){return function(t){var e,n,r,o=[],a=-1,i=0,u=c.length;for(t instanceof Date||(t=new Date(+t));++a<u;)37===c.charCodeAt(a)&&(o.push(c.slice(i,a)),null!=(n=K[e=c.charAt(++a)])?e=c.charAt(++a):n="e"===e?" ":"0",(r=s[e])&&(e=r(t,n)),o.push(e),i=a+1);return o.push(c.slice(i,a)),o.join("")}}function _(o,a){return function(t){var e,n,r=Q(1900);if(b(r,o,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),r.d="Z"in r?(e=4<(n=(e=J(Q(r.y))).getUTCDay())||0===n?z.ceil(e):z(e),e=P.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=a(Q(r.y))).getDay())||0===n?j.ceil(e):j(e),e=H.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?J(Q(r.y)).getUTCDay():a(Q(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,J(r)):a(r)}}function b(t,e,n,r){for(var o,a,i=0,u=e.length,c=n.length;i<u;){if(c<=r)return-1;if(37===(o=e.charCodeAt(i++))){if(o=e.charAt(i++),!(a=C[o in K?e.charAt(i++):o])||(r=a(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return y.x=M(o,y),y.X=M(a,y),y.c=M(r,y),T.x=M(o,T),T.X=M(a,T),T.c=M(r,T),{format:function(t){var e=M(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",X);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",T);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t,J);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),q.format,q.parse,G=q.utcFormat,$=q.utcParse;var se="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||G(se);+new Date("2000-01-01T00:00:00.000Z")||$(se);var le="https://himawari8-dl.nict.go.jp/himawari8/img/",fe="https://epic.gsfc.nasa.gov/",ge="http://rammb-slider.cira.colostate.edu/data/",he="https://epic.gsfc.nasa.gov",de="INFRARED_FULL",me="D531106",ve="EPIC",pe="EPIC_ENHANCED",we="GOES_16",ye="GOES_16_NATURAL",Te="METEOSAT",Ce="METEOSAT_IODC",Me=550,_e=[1,4,8,16,20],be=678,Ue=[1,2,4,8,16],De=2048,Se=3712,xe=3630,Ee=.95,Ie="imageData",ke="cachedDate",Fe="cachedImageType",Ye=null,Ae=browser&&!!browser.storage,He={animated:!1,imageType:me};function Le(t,e){return void 0===e&&(e=432e3),"https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url="+t+"&container=focus&refresh="+e}function Oe(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function je(t,e){for(var n=document.getElementById("output").clientHeight*window.devicePixelRatio/t,r=0;r<e.length;r++){var o=e[r];if(n<o)return{blocks:o,level:r}}var a=e.length-1;return{blocks:e[a],level:a}}var Re=null,Be=null;function Pe(t){var e,n,r;document.getElementById("time").innerHTML=t===Ye?"":'<abbr title="'+t+'">'+(e=t,n=Math.floor(((new Date).getTime()-e.getTime())/1e3),1<(r=Math.floor(n/31536e3))?r+" years":1<(r=Math.floor(n/2592e3))?r+" months":1<(r=Math.floor(n/86400))?r+" days":1<(r=Math.floor(n/3600))?r+" hours":1<(r=Math.floor(n/60))?r+" minutes":Math.floor(n)+" seconds")+"</abbr> ago"}function Ne(t,e){Pe(t),Re=t,function(t){switch(document.body.classList.remove("himawari"),document.body.classList.remove("dscovr"),document.body.classList.remove("goes"),document.body.classList.remove("goes16"),document.body.classList.remove("meteosat"),t){case de:case me:document.body.classList.add("himawari");break;case ve:case pe:document.body.classList.add("dscovr");break;case we:case ye:document.body.classList.add("goes16");break;case Te:case Ce:document.body.classList.add("meteosat");break;default:console.warn("Unknown image type",t)}}(e),Be=e}function Ze(n,r){if(!Re||n.getTime()!==Re.getTime()||Be!==r){var o=!localStorage.getItem(ke);o&&Ne(n,r);var t=function(t){for(var e=le+(t.type||me),n=t.date,r=t.blocks,o=e+"/"+r+"d/"+Me+"/"+G("%Y/%m/%d/%H%M%S")(n),a=[],i=0;i<r;i++)for(var u=0;u<r;u++){var c=o+"_"+u+"_"+i+".png";a.push({url:Le(c),x:u,y:i})}return{blocks:r,date:n,tiles:a}}({blocks:je(Me,_e).blocks,date:n,type:r}),a=t.blocks*Me,i=o?document.getElementById("output"):document.createElement("canvas"),u=i.getContext("2d");u.canvas.width=a,u.canvas.height=a;var e=l();t.tiles.forEach(function(t){e.defer(c,t)}),e.awaitAll(function(t){if(t)throw t;if(!o){var e=document.getElementById("output").getContext("2d");e.canvas.width=a,e.canvas.height=a,e.drawImage(i,0,0)}Ne(n,r),We(n,r)})}function c(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){u.drawImage(n,t.x*Me,t.y*Me,Me,Me),e()},n.src=t.url}}function ze(n,r){if(!Re||n.getTime()!==Re.getTime()||Be!==r){var o=!localStorage.getItem(ke);o&&Ne(n,r);var t=function(t){for(var e=t.date,n=t.blocks,r=t.level,o=t.type===ye?"natural_color":"geocolor",a=G("%Y%m%d")(t.date),i=G("%Y%m%d%H%M%S")(t.date),u=ge+"/imagery/"+a+"/goes-16---full_disk/"+o+"/"+i+"/",c=[],s=0;s<n;s++)for(var l=0;l<n;l++){var f=""+u+Oe(r,2)+"/"+Oe(s,3)+"_"+Oe(l,3)+".png";c.push({url:Le(f),x:l,y:s})}return{blocks:n,date:e,tiles:c}}(s({date:n,type:r},je(be,Ue))),a=t.blocks*Me,i=o?document.getElementById("output"):document.createElement("canvas"),u=i.getContext("2d");u.canvas.width=a,u.canvas.height=a;var e=l();t.tiles.forEach(function(t){e.defer(c,t)}),e.awaitAll(function(t){if(t)throw t;if(!o){var e=document.getElementById("output").getContext("2d");e.canvas.width=a,e.canvas.height=a,e.drawImage(i,0,0)}Ne(n,r),We(n,r)})}function c(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){u.drawImage(n,t.x*Me,t.y*Me,Me,Me),e()},n.src=t.url}}function We(e,n,r){void 0===r&&(r=Ee);var t=document.getElementById("output").toDataURL("image/jpeg",r);try{localStorage.setItem(Ie,t)}catch(t){if(.5<r)return r-=.05,console.warn("Couldn't store image. Trying again with lower image quality of "+r),We(e,n,r)}localStorage.setItem(ke,e.toString()),localStorage.setItem(Fe,n)}function Ve(){function e(e){var r;r=function(t){Ze(t,e)},C("https://himawari-8.appspot.com/latest"+(e===de?"?infrared=true":""),function(t,e){if(t)throw t;var n=e.date;r($("%Y-%m-%d %H:%M:%S")(n))})}function n(e){var r;r=function(t){!function(e,n){if(!Re||e.date.getTime()!==Re.getTime()||Be!==n){var r=!localStorage.getItem(ke);r&&Ne(e.date,n);var o=r?document.getElementById("output"):document.createElement("canvas"),a=o.getContext("2d");a.canvas.width=De,a.canvas.height=De;var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){if(a.drawImage(i,0,0),!r){var t=document.getElementById("output").getContext("2d");t.canvas.width=De,t.canvas.height=De,t.drawImage(o,0,0)}Ne(e.date,n),We(e.date,n)};var t=n===pe?"enhanced":"natural",u=Oe(e.date.getMonth()+1,2),c=Oe(e.date.getDate(),2);i.src=Le(fe+"archive/"+t+"/"+e.date.getFullYear()+"/"+u+"/"+c+"/png/"+e.image+".png")}}(t,e)},C(fe+"api/"+(e===pe?"enhanced":"natural"),function(t,e){if(t)throw t;if(0!==e.length){var n=e[e.length-1];r({date:$("%Y-%m-%d %H:%M:%S")(n.date),image:n.image})}})}function r(e){var n;n=function(t){ze(t,e)},C(ge+"json/goes-16/full_disk/geocolor/latest_times.json",function(t,e){if(t)throw t;n($("%Y%m%d%H%M%S")(e.timestamps_int[0]))})}function o(e){var n;n=function(t){!function(e,n){if(!Re||e.date.getTime()!==Re.getTime()||Be!==n){var r=!localStorage.getItem(ke);r&&Ne(e.date,n);var o=r?document.getElementById("output"):document.createElement("canvas"),a=o.getContext("2d");a.canvas.width=Se,a.canvas.height=xe;var i=new Image;i.setAttribute("crossOrigin","anonymous"),i.onload=function(){if(a.drawImage(i,0,0),!r){var t=document.getElementById("output").getContext("2d");t.canvas.width=Se,t.canvas.height=xe,t.drawImage(o,0,0)}Ne(e.date,n),We(e.date,n)},i.src=Le(""+e.image)}}(t,e)},C("https://meteosat-url.appspot.com/msg"+(e===Ce?"iodc":""),function(t,e){if(t)throw t;n({date:$("%Y-%m-%d %H:%M:%S")(e.date),image:e.url})})}navigator.onLine&&(Ae?browser.storage.sync.get(He).then(function(t){switch(t.imageType){case ve:case pe:n(t.imageType);break;case we:case ye:r(t.imageType);break;case Te:case Ce:o(t.imageType);break;case de:case me:default:e(t.imageType)}}):e(me))}function Xe(){var t,e,n;localStorage.getItem(ke)&&(t=document.getElementById("output").getContext("2d"),e=new Date(localStorage.getItem(ke)),(n=new Image).onload=function(){t.canvas.width=n.width,t.canvas.height=n.height,t.drawImage(n,0,0),Ne(e,localStorage.getItem(Fe))},n.src=localStorage.getItem(Ie)),Ve()}window.setInterval(Ve,6e4),window.addEventListener("online",Ve),Ae?browser.storage.sync.get(He).then(function(t){t.animated?document.body.classList.add("animated"):document.body.classList.remove("animated"),Xe()}):Xe(),window.setInterval(function(){Re&&Pe(Re)},1e4),Ae&&(browser.storage.onChanged.addListener(Ve),document.body.classList.add("extension"),document.getElementById("go-to-options").addEventListener("click",function(){browser.runtime.openOptionsPage()})),document.getElementById("explore").addEventListener("click",function(){switch(Be){case ve:window.open(he,"_self");case pe:window.open("https://epic.gsfc.nasa.gov/enhanced","_self");break;case we:case ye:window.open("http://rammb-slider.cira.colostate.edu/","_self");break;case de:case me:window.open("http://himawari8.nict.go.jp/himawari8-image.htm?sI=D531106","_self");break;case Te:case Ce:window.open("http://oiswww.eumetsat.org/IPPS/html/MSG/IMAGERY/","_self");break;default:window.alert("No explorer found.")}})}();
//# sourceMappingURL=bundle.js.map
