!function(){"use strict";var s=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},n=[].slice,i={};function e(t){this._size=t,this._call=this._error=null,this._tasks=[],this._data=[],this._waiting=this._active=this._ended=this._start=0}function o(e){if(!e._start)try{!function(t){for(;t._start=t._waiting&&t._active<t._size;){var e=t._ended+t._active,n=t._tasks[e],r=n.length-1,o=n[r];n[r]=u(t,e),--t._waiting,++t._active,n=o.apply(null,n),t._tasks[e]&&(t._tasks[e]=n||i)}}(e)}catch(t){if(e._tasks[e._ended+e._active-1])a(e,t);else if(!e._data)throw t}}function u(n,r){return function(t,e){n._tasks[r]&&(--n._active,++n._ended,(n._tasks[r]=null)==n._error&&(null!=t?a(n,t):(n._data[r]=e,n._waiting?o(n):c(n))))}}function a(t,e){var n,r=t._tasks.length;for(t._error=e,t._data=void 0,t._waiting=NaN;0<=--r;)if((n=t._tasks[r])&&(t._tasks[r]=null,n.abort))try{n.abort()}catch(e){}t._active=NaN,c(t)}function c(t){if(!t._active&&t._call){var e=t._data;t._data=void 0,t._call(t._error,e)}}function l(t){if(null==t)t=1/0;else if(!(1<=(t=+t)))throw new Error("invalid concurrency");return new e(t)}e.prototype=l.prototype={constructor:e,defer:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("defer after await");if(null!=this._error)return this;var e=n.call(arguments,1);return e.push(t),++this._waiting,this._tasks.push(e),o(this),this},abort:function(){return null==this._error&&a(this,new Error("abort")),this},await:function(n){if("function"!=typeof n)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=function(t,e){n.apply(null,[t].concat(e))},c(this),this},awaitAll:function(t){if("function"!=typeof t)throw new Error("invalid callback");if(this._call)throw new Error("multiple await");return this._call=t,c(this),this}};var r="$";function f(){}function m(t,e){var n=new f;if(t instanceof f)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,o=-1,i=t.length;if(null==e)for(;++o<i;)n.set(o,t[o]);else for(;++o<i;)n.set(e(r=t[o],o,t),r)}else if(t)for(var u in t)n.set(u,t[u]);return n}function g(){}f.prototype=m.prototype={constructor:f,has:function(t){return r+t in this},get:function(t){return this[r+t]},set:function(t,e){return this[r+t]=e,this},remove:function(t){var e=r+t;return e in this&&delete this[e]},clear:function(){for(var t in this)t[0]===r&&delete this[t]},keys:function(){var t=[];for(var e in this)e[0]===r&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)e[0]===r&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)e[0]===r&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)e[0]===r&&++t;return t},empty:function(){for(var t in this)if(t[0]===r)return!1;return!0},each:function(t){for(var e in this)e[0]===r&&t(this[e],e.slice(1),this)}};var t=m.prototype;g.prototype=function(t,e){var n=new g;if(t instanceof g)t.each(function(t){n.add(t)});else if(t){var r=-1,o=t.length;if(null==e)for(;++r<o;)n.add(t[r]);else for(;++r<o;)n.add(e(t[r],r,t))}return n}.prototype={constructor:g,has:t.has,add:function(t){return this[r+(t+="")]=t,this},remove:t.remove,clear:t.clear,values:t.keys,size:t.size,empty:t.empty,each:t.each};var h={value:function(){}};function v(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new d(r)}function d(t){this._=t}function p(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function w(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=h,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}d.prototype=v.prototype={constructor:d,on:function(t,e){var n,r,o=this._,i=(r=o,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(0<=n&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),u=-1,a=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++u<a;)if(n=(t=i[u]).type)o[n]=w(o[n],t.name,e);else if(null==e)for(n in o)o[n]=w(o[n],t.name,null);return this}for(;++u<a;)if((n=(t=i[u]).type)&&(n=p(o[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new d(t)},call:function(t,e){if(0<(n=arguments.length-2))for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};var y,T,C=(y="application/json",T=function(t){return JSON.parse(t.responseText)},function(t,e){var n=function(o,t){var i,u,a,c,s=v("beforesend","progress","load","error"),l=m(),f=new XMLHttpRequest,g=null,h=null,d=0;function e(t){var e,n,r,o=f.status;if(!o&&((r=(n=f).responseType)&&"text"!==r?n.response:n.responseText)||200<=o&&o<300||304===o){if(a)try{e=a.call(i,f)}catch(t){return void s.call("error",i,t)}else e=f;s.call("load",i,e)}else s.call("error",i,t)}if("undefined"==typeof XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(o)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=f.ontimeout=e:f.onreadystatechange=function(t){3<f.readyState&&e(t)},f.onprogress=function(t){s.call("progress",i,t)},i={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?l.get(t):(null==e?l.remove(t):l.set(t,e+""),i)},mimeType:function(t){return arguments.length?(u=null==t?null:t+"",i):u},responseType:function(t){return arguments.length?(c=t,i):c},timeout:function(t){return arguments.length?(d=+t,i):d},user:function(t){return arguments.length<1?g:(g=null==t?null:t+"",i)},password:function(t){return arguments.length<1?h:(h=null==t?null:t+"",i)},response:function(t){return a=t,i},get:function(t,e){return i.send("GET",t,e)},post:function(t,e){return i.send("POST",t,e)},send:function(t,e,n){var r;return f.open(t,o,!0,g,h),null==u||l.has("accept")||l.set("accept",u+",*/*"),f.setRequestHeader&&l.each(function(t,e){f.setRequestHeader(e,t)}),null!=u&&f.overrideMimeType&&f.overrideMimeType(u),null!=c&&(f.responseType=c),0<d&&(f.timeout=d),null==n&&"function"==typeof e&&(n=e,e=null),null!=n&&1===n.length&&(r=n,n=function(t,e){r(null==t?e:null)}),null!=n&&i.on("error",n).on("load",function(t){n(null,t)}),s.call("beforesend",i,f),f.send(null==e?null:e),i},abort:function(){return f.abort(),i},on:function(){var t=s.on.apply(s,arguments);return t===s?i:t}},null!=t){if("function"!=typeof t)throw new Error("invalid callback: "+t);return i.get(t)}return i}(t).mimeType(y).response(T);if(null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return n.get(e)}return n}),M={},_={};function U(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function D(i){var e=new RegExp('["'+i+"\n\r]"),f=i.charCodeAt(0);function n(r,t){var e,n=[],o=r.length,i=0,u=0,a=o<=0,c=!1;function s(){if(a)return _;if(c)return c=!1,M;var t,e,n=i;if(34===r.charCodeAt(n)){for(;i++<o&&34!==r.charCodeAt(i)||34===r.charCodeAt(++i););return(t=i)>=o?a=!0:10===(e=r.charCodeAt(i++))?c=!0:13===e&&(c=!0,10===r.charCodeAt(i)&&++i),r.slice(n+1,t-1).replace(/""/g,'"')}for(;i<o;){if(10===(e=r.charCodeAt(t=i++)))c=!0;else if(13===e)c=!0,10===r.charCodeAt(i)&&++i;else if(e!==f)continue;return r.slice(n,t)}return a=!0,r.slice(n,o)}for(10===r.charCodeAt(o-1)&&--o,13===r.charCodeAt(o-1)&&--o;(e=s())!==_;){for(var l=[];e!==M&&e!==_;)l.push(e),e=s();t&&null==(l=t(l,u++))||n.push(l)}return n}function r(t){return t.map(u).join(i)}function u(t){return null==t?"":e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,i){var u,a,e=n(t,function(t,e){if(u)return u(t,e-1);var n,r,o;a=t,u=i?(r=i,o=U(n=t),function(t,e){return r(o(t),e,n)}):U(t)});return e.columns=a||[],e},parseRows:n,format:function(t,n){var e,r,o;return null==n&&(e=t,r=Object.create(null),o=[],e.forEach(function(t){for(var e in t)e in r||o.push(r[e]=e)}),n=o),[n.map(u).join(i)].concat(t.map(function(e){return n.map(function(t){return u(e[t])}).join(i)})).join("\n")},formatRows:function(t){return t.map(r).join("\n")}}}var b=D(","),x=(b.parse,b.parseRows,b.format,b.formatRows,D("\t")),S=(x.parse,x.parseRows,x.format,x.formatRows,new Date),k=new Date;function E(i,u,n,r){function a(t){return i(t=new Date(+t)),t}return(a.floor=a).ceil=function(t){return i(t=new Date(t-1)),u(t,1),i(t),t},a.round=function(t){var e=a(t),n=a.ceil(t);return t-e<n-t?e:n},a.offset=function(t,e){return u(t=new Date(+t),null==e?1:Math.floor(e)),t},a.range=function(t,e,n){var r,o=[];if(t=a.ceil(t),n=null==n?1:Math.floor(n),!(t<e&&0<n))return o;for(;o.push(r=new Date(+t)),u(t,n),i(t),r<t&&t<e;);return o},a.filter=function(n){return E(function(t){if(t<=t)for(;i(t),!n(t);)t.setTime(t-1)},function(t,e){if(t<=t)if(e<0)for(;++e<=0;)for(;u(t,-1),!n(t););else for(;0<=--e;)for(;u(t,1),!n(t););})},n&&(a.count=function(t,e){return S.setTime(+t),k.setTime(+e),i(S),i(k),Math.floor(n(S,k))},a.every=function(e){return e=Math.floor(e),isFinite(e)&&0<e?1<e?a.filter(r?function(t){return r(t)%e==0}:function(t){return a.count(0,t)%e==0}):a:null}),a}var I=E(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});I.every=function(n){return n=Math.floor(n),isFinite(n)&&0<n?1<n?E(function(t){t.setTime(Math.floor(t/n)*n)},function(t,e){t.setTime(+t+e*n)},function(t,e){return(e-t)/n}):I:null};var F=1e3,H=6e4,Y=36e5,A=(E(function(t){t.setTime(Math.floor(t/F)*F)},function(t,e){t.setTime(+t+e*F)},function(t,e){return(e-t)/F},function(t){return t.getUTCSeconds()}),E(function(t){t.setTime(Math.floor(t/H)*H)},function(t,e){t.setTime(+t+e*H)},function(t,e){return(e-t)/H},function(t){return t.getMinutes()}),E(function(t){var e=t.getTimezoneOffset()*H%Y;e<0&&(e+=Y),t.setTime(Math.floor((+t-e)/Y)*Y+e)},function(t,e){t.setTime(+t+e*Y)},function(t,e){return(e-t)/Y},function(t){return t.getHours()}),E(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*H)/864e5},function(t){return t.getDate()-1}));function L(e){return E(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*H)/6048e5})}var O=L(0),j=L(1),R=(L(2),L(3),L(4)),B=(L(5),L(6),O.range,j.range,R.range,E(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),E(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()}));B.every=function(n){return isFinite(n=Math.floor(n))&&0<n?E(function(t){t.setFullYear(Math.floor(t.getFullYear()/n)*n),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e*n)}):null};E(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*H)},function(t,e){return(e-t)/H},function(t){return t.getUTCMinutes()}),E(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+e*Y)},function(t,e){return(e-t)/Y},function(t){return t.getUTCHours()});var N=E(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1});function P(e){return E(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/6048e5})}var Z=P(0),z=P(1),W=(P(2),P(3),P(4)),V=(P(5),P(6),Z.range,z.range,W.range,E(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),E(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()}));function X(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function J(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Q(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}V.every=function(n){return isFinite(n=Math.floor(n))&&0<n?E(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/n)*n),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e*n)}):null};var q,G,$,K={"-":"",_:" ",0:"0"},tt=/^\s*\d+/,et=/^%/,nt=/[\\^$*+?|[\]().{}]/g;function rt(t,e,n){var r=t<0?"-":"",o=(r?-t:t)+"",i=o.length;return r+(i<n?new Array(n-i+1).join(e)+o:o)}function ot(t){return t.replace(nt,"\\$&")}function it(t){return new RegExp("^(?:"+t.map(ot).join("|")+")","i")}function ut(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function at(t,e,n){var r=tt.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function ct(t,e,n){var r=tt.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function st(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function lt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function ft(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function gt(t,e,n){var r=tt.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function ht(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(68<+r[0]?1900:2e3),n+r[0].length):-1}function dt(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function mt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function vt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function pt(t,e,n){var r=tt.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function yt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Tt(t,e,n){var r=tt.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Ct(t,e,n){var r=tt.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Mt(t,e,n){var r=tt.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _t(t,e,n){var r=et.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function Ut(t,e,n){var r=tt.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Dt(t,e,n){var r=tt.exec(e.slice(n));return r?(t.Q=1e3*+r[0],n+r[0].length):-1}function bt(t,e){return rt(t.getDate(),e,2)}function xt(t,e){return rt(t.getHours(),e,2)}function St(t,e){return rt(t.getHours()%12||12,e,2)}function kt(t,e){return rt(1+A.count(B(t),t),e,3)}function Et(t,e){return rt(t.getMilliseconds(),e,3)}function It(t,e){return Et(t,e)+"000"}function Ft(t,e){return rt(t.getMonth()+1,e,2)}function Ht(t,e){return rt(t.getMinutes(),e,2)}function Yt(t,e){return rt(t.getSeconds(),e,2)}function At(t){var e=t.getDay();return 0===e?7:e}function Lt(t,e){return rt(O.count(B(t),t),e,2)}function Ot(t,e){var n=t.getDay();return t=4<=n||0===n?R(t):R.ceil(t),rt(R.count(B(t),t)+(4===B(t).getDay()),e,2)}function jt(t){return t.getDay()}function Rt(t,e){return rt(j.count(B(t),t),e,2)}function Bt(t,e){return rt(t.getFullYear()%100,e,2)}function Nt(t,e){return rt(t.getFullYear()%1e4,e,4)}function Pt(t){var e=t.getTimezoneOffset();return(0<e?"-":(e*=-1,"+"))+rt(e/60|0,"0",2)+rt(e%60,"0",2)}function Zt(t,e){return rt(t.getUTCDate(),e,2)}function zt(t,e){return rt(t.getUTCHours(),e,2)}function Wt(t,e){return rt(t.getUTCHours()%12||12,e,2)}function Vt(t,e){return rt(1+N.count(V(t),t),e,3)}function Xt(t,e){return rt(t.getUTCMilliseconds(),e,3)}function Jt(t,e){return Xt(t,e)+"000"}function Qt(t,e){return rt(t.getUTCMonth()+1,e,2)}function qt(t,e){return rt(t.getUTCMinutes(),e,2)}function Gt(t,e){return rt(t.getUTCSeconds(),e,2)}function $t(t){var e=t.getUTCDay();return 0===e?7:e}function Kt(t,e){return rt(Z.count(V(t),t),e,2)}function te(t,e){var n=t.getUTCDay();return t=4<=n||0===n?W(t):W.ceil(t),rt(W.count(V(t),t)+(4===V(t).getUTCDay()),e,2)}function ee(t){return t.getUTCDay()}function ne(t,e){return rt(z.count(V(t),t),e,2)}function re(t,e){return rt(t.getUTCFullYear()%100,e,2)}function oe(t,e){return rt(t.getUTCFullYear()%1e4,e,4)}function ie(){return"+0000"}function ue(){return"%"}function ae(t){return+t}function ce(t){return Math.floor(+t/1e3)}q=function(t){var r=t.dateTime,o=t.date,i=t.time,e=t.periods,n=t.days,u=t.shortDays,a=t.months,c=t.shortMonths,s=it(e),l=ut(e),f=it(n),g=ut(n),h=it(u),d=ut(u),m=it(a),v=ut(a),p=it(c),w=ut(c),y={a:function(t){return u[t.getDay()]},A:function(t){return n[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:bt,e:bt,f:It,H:xt,I:St,j:kt,L:Et,m:Ft,M:Ht,p:function(t){return e[+(12<=t.getHours())]},Q:ae,s:ce,S:Yt,u:At,U:Lt,V:Ot,w:jt,W:Rt,x:null,X:null,y:Bt,Y:Nt,Z:Pt,"%":ue},T={a:function(t){return u[t.getUTCDay()]},A:function(t){return n[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:Zt,e:Zt,f:Jt,H:zt,I:Wt,j:Vt,L:Xt,m:Qt,M:qt,p:function(t){return e[+(12<=t.getUTCHours())]},Q:ae,s:ce,S:Gt,u:$t,U:Kt,V:te,w:ee,W:ne,x:null,X:null,y:re,Y:oe,Z:ie,"%":ue},C={a:function(t,e,n){var r=h.exec(e.slice(n));return r?(t.w=d[r[0].toLowerCase()],n+r[0].length):-1},A:function(t,e,n){var r=f.exec(e.slice(n));return r?(t.w=g[r[0].toLowerCase()],n+r[0].length):-1},b:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.m=w[r[0].toLowerCase()],n+r[0].length):-1},B:function(t,e,n){var r=m.exec(e.slice(n));return r?(t.m=v[r[0].toLowerCase()],n+r[0].length):-1},c:function(t,e,n){return U(t,r,e,n)},d:vt,e:vt,f:Mt,H:wt,I:wt,j:pt,L:Ct,m:mt,M:yt,p:function(t,e,n){var r=s.exec(e.slice(n));return r?(t.p=l[r[0].toLowerCase()],n+r[0].length):-1},Q:Ut,s:Dt,S:Tt,u:ct,U:st,V:lt,w:at,W:ft,x:function(t,e,n){return U(t,o,e,n)},X:function(t,e,n){return U(t,i,e,n)},y:ht,Y:gt,Z:dt,"%":_t};function M(c,s){return function(t){var e,n,r,o=[],i=-1,u=0,a=c.length;for(t instanceof Date||(t=new Date(+t));++i<a;)37===c.charCodeAt(i)&&(o.push(c.slice(u,i)),null!=(n=K[e=c.charAt(++i)])?e=c.charAt(++i):n="e"===e?" ":"0",(r=s[e])&&(e=r(t,n)),o.push(e),u=i+1);return o.push(c.slice(u,i)),o.join("")}}function _(o,i){return function(t){var e,n,r=Q(1900);if(U(r,o,t+="",0)!=t.length)return null;if("Q"in r)return new Date(r.Q);if("p"in r&&(r.H=r.H%12+12*r.p),"V"in r){if(r.V<1||53<r.V)return null;"w"in r||(r.w=1),"Z"in r?(e=4<(n=(e=J(Q(r.y))).getUTCDay())||0===n?z.ceil(e):z(e),e=N.offset(e,7*(r.V-1)),r.y=e.getUTCFullYear(),r.m=e.getUTCMonth(),r.d=e.getUTCDate()+(r.w+6)%7):(e=4<(n=(e=i(Q(r.y))).getDay())||0===n?j.ceil(e):j(e),e=A.offset(e,7*(r.V-1)),r.y=e.getFullYear(),r.m=e.getMonth(),r.d=e.getDate()+(r.w+6)%7)}else("W"in r||"U"in r)&&("w"in r||(r.w="u"in r?r.u%7:"W"in r?1:0),n="Z"in r?J(Q(r.y)).getUTCDay():i(Q(r.y)).getDay(),r.m=0,r.d="W"in r?(r.w+6)%7+7*r.W-(n+5)%7:r.w+7*r.U-(n+6)%7);return"Z"in r?(r.H+=r.Z/100|0,r.M+=r.Z%100,J(r)):i(r)}}function U(t,e,n,r){for(var o,i,u=0,a=e.length,c=n.length;u<a;){if(c<=r)return-1;if(37===(o=e.charCodeAt(u++))){if(o=e.charAt(u++),!(i=C[o in K?e.charAt(u++):o])||(r=i(t,n,r))<0)return-1}else if(o!=n.charCodeAt(r++))return-1}return r}return y.x=M(o,y),y.X=M(i,y),y.c=M(r,y),T.x=M(o,T),T.X=M(i,T),T.c=M(r,T),{format:function(t){var e=M(t+="",y);return e.toString=function(){return t},e},parse:function(t){var e=_(t+="",X);return e.toString=function(){return t},e},utcFormat:function(t){var e=M(t+="",T);return e.toString=function(){return t},e},utcParse:function(t){var e=_(t,J);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),q.format,q.parse,G=q.utcFormat,$=q.utcParse;var se="%Y-%m-%dT%H:%M:%S.%LZ";Date.prototype.toISOString||G(se);+new Date("2000-01-01T00:00:00.000Z")||$(se);var le="https://himawari8-dl.nict.go.jp/himawari8/img/",fe="https://epic.gsfc.nasa.gov/",ge="http://rammb-slider.cira.colostate.edu/data/",he="https://epic.gsfc.nasa.gov",de="INFRARED_FULL",me="D531106",ve="EPIC",pe="EPIC_ENHANCED",we="GOES_16",ye="GOES_16_NATURAL",Te=550,Ce=[1,4,8,16,20],Me=678,_e=[1,2,4,8,16],Ue=2048,De=.95,be="imageData",xe="cachedDate",Se="cachedImageType",ke=null,Ee=browser&&!!browser.storage,Ie={animated:!1,imageType:me};function Fe(t,e){return void 0===e&&(e=432e3),"https://images1-focus-opensocial.googleusercontent.com/gadgets/proxy?url="+t+"&container=focus&refresh="+e}function He(t,e){for(var n=t+"";n.length<e;)n="0"+n;return n}function Ye(t,e){for(var n=document.getElementById("output").clientHeight*window.devicePixelRatio/t,r=0;r<e.length;r++){var o=e[r];if(n<o)return{blocks:o,level:r}}var i=e.length-1;return{blocks:e[i],level:i}}var Ae=null,Le=null;function Oe(t){var e,n,r;document.getElementById("time").innerHTML=t===ke?"":'<abbr title="'+t+'">'+(e=t,n=Math.floor(((new Date).getTime()-e.getTime())/1e3),1<(r=Math.floor(n/31536e3))?r+" years":1<(r=Math.floor(n/2592e3))?r+" months":1<(r=Math.floor(n/86400))?r+" days":1<(r=Math.floor(n/3600))?r+" hours":1<(r=Math.floor(n/60))?r+" minutes":Math.floor(n)+" seconds")+"</abbr> ago"}function je(t,e){Oe(t),Ae=t,function(t){switch(document.body.classList.remove("himawari"),document.body.classList.remove("dscovr"),document.body.classList.remove("goes"),document.body.classList.remove("goes16"),t){case de:case me:document.body.classList.add("himawari");break;case ve:case pe:document.body.classList.add("dscovr");break;case we:case ye:document.body.classList.add("goes16");break;default:console.warn("Unknown image type",t)}}(e),Le=e}function Re(n,r){if(!Ae||n.getTime()!==Ae.getTime()||Le!==r){var o=!localStorage.getItem(xe);o&&je(n,r);var t=function(t){for(var e=le+(t.type||me),n=t.date,r=t.blocks,o=e+"/"+r+"d/"+Te+"/"+G("%Y/%m/%d/%H%M%S")(n),i=[],u=0;u<r;u++)for(var a=0;a<r;a++){var c=o+"_"+a+"_"+u+".png";i.push({url:Fe(c),x:a,y:u})}return{blocks:r,date:n,tiles:i}}({blocks:Ye(Te,Ce).blocks,date:n,type:r}),i=t.blocks*Te,u=o?document.getElementById("output"):document.createElement("canvas"),a=u.getContext("2d");a.canvas.width=i,a.canvas.height=i;var e=l();t.tiles.forEach(function(t){e.defer(c,t)}),e.awaitAll(function(t){if(t)throw t;if(!o){var e=document.getElementById("output").getContext("2d");e.canvas.width=i,e.canvas.height=i,e.drawImage(u,0,0)}je(n,r),Ne(n,r)})}function c(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){a.drawImage(n,t.x*Te,t.y*Te,Te,Te),e()},n.src=t.url}}function Be(n,r){if(!Ae||n.getTime()!==Ae.getTime()||Le!==r){var o=!localStorage.getItem(xe);o&&je(n,r);var t=function(t){for(var e=t.date,n=t.blocks,r=t.level,o=t.type===ye?"natural_color":"geocolor",i=G("%Y%m%d")(t.date),u=G("%Y%m%d%H%M%S")(t.date),a=ge+"/imagery/"+i+"/goes-16---full_disk/"+o+"/"+u+"/",c=[],s=0;s<n;s++)for(var l=0;l<n;l++){var f=""+a+He(r,2)+"/"+He(s,3)+"_"+He(l,3)+".png";c.push({url:Fe(f),x:l,y:s})}return{blocks:n,date:e,tiles:c}}(s({date:n,type:r},Ye(Me,_e))),i=t.blocks*Te,u=o?document.getElementById("output"):document.createElement("canvas"),a=u.getContext("2d");a.canvas.width=i,a.canvas.height=i;var e=l();t.tiles.forEach(function(t){e.defer(c,t)}),e.awaitAll(function(t){if(t)throw t;if(!o){var e=document.getElementById("output").getContext("2d");e.canvas.width=i,e.canvas.height=i,e.drawImage(u,0,0)}je(n,r),Ne(n,r)})}function c(t,e){var n=new Image;n.setAttribute("crossOrigin","anonymous"),n.onload=function(){a.drawImage(n,t.x*Te,t.y*Te,Te,Te),e()},n.src=t.url}}function Ne(e,n,r){void 0===r&&(r=De);var t=document.getElementById("output").toDataURL("image/jpeg",r);try{localStorage.setItem(be,t)}catch(t){if(50<r)return console.warn("Couldn't store image. Trying again with lower image quality of "+r),Ne(e,n,r-5)}localStorage.setItem(xe,e.toString()),localStorage.setItem(Se,n)}function Pe(){function e(e){var r;r=function(t){Re(t,e)},C("https://himawari-8.appspot.com/latest"+(e===de?"?infrared=true":""),function(t,e){if(t)throw t;var n=e.date;r($("%Y-%m-%d %H:%M:%S")(n))})}function n(e){var r;r=function(t){!function(e,n){if(!Ae||e.date.getTime()!==Ae.getTime()||Le!==n){var r=!localStorage.getItem(xe);r&&je(e.date,n);var o=r?document.getElementById("output"):document.createElement("canvas"),i=o.getContext("2d");i.canvas.width=Ue,i.canvas.height=Ue;var u=new Image;u.setAttribute("crossOrigin","anonymous"),u.onload=function(){if(i.drawImage(u,0,0),!r){var t=document.getElementById("output").getContext("2d");t.canvas.width=Ue,t.canvas.height=Ue,t.drawImage(o,0,0)}je(e.date,n),Ne(e.date,n)};var t=n===pe?"enhanced":"natural",a=He(e.date.getMonth()+1,2),c=He(e.date.getDate(),2);u.src=Fe(fe+"archive/"+t+"/"+e.date.getFullYear()+"/"+a+"/"+c+"/png/"+e.image+".png")}}(t,e)},C(fe+"api/"+(e===pe?"enhanced":"natural"),function(t,e){if(t)throw t;if(0!==e.length){var n=e[e.length-1];r({date:$("%Y-%m-%d %H:%M:%S")(n.date),image:n.image})}})}function r(e){var n;n=function(t){Be(t,e)},C(ge+"json/goes-16/full_disk/geocolor/latest_times.json",function(t,e){if(t)throw t;n($("%Y%m%d%H%M%S")(e.timestamps_int[0]))})}navigator.onLine&&(Ee?browser.storage.sync.get(Ie).then(function(t){switch(t.imageType){case ve:case pe:n(t.imageType);break;case we:case ye:r(t.imageType);break;case de:case me:default:e(t.imageType)}}):e(me))}function Ze(){var t,e,n;localStorage.getItem(xe)&&(t=document.getElementById("output").getContext("2d"),e=new Date(localStorage.getItem(xe)),(n=new Image).onload=function(){t.canvas.width=n.width,t.canvas.height=n.height,t.drawImage(n,0,0),je(e,localStorage.getItem(Se))},n.src=localStorage.getItem(be)),Pe()}window.setInterval(Pe,6e4),window.addEventListener("online",Pe),Ee?browser.storage.sync.get(Ie).then(function(t){t.animated?document.body.classList.add("animated"):document.body.classList.remove("animated"),Ze()}):Ze(),window.setInterval(function(){Ae&&Oe(Ae)},1e4),Ee&&(browser.storage.onChanged.addListener(Pe),document.body.classList.add("extension"),document.getElementById("go-to-options").addEventListener("click",function(){browser.runtime.openOptionsPage()})),document.getElementById("explore").addEventListener("click",function(){switch(Le){case ve:window.open(he,"_self");case pe:window.open("https://epic.gsfc.nasa.gov/enhanced","_self");break;case we:case ye:window.open("http://rammb-slider.cira.colostate.edu/","_self");break;case de:case me:window.open("http://himawari8.nict.go.jp/himawari8-image.htm?sI=D531106","_self");break;default:window.alert("No explorer found.")}})}();
//# sourceMappingURL=bundle.js.map
